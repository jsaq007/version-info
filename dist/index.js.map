{"version":3,"file":"index.js","sources":["../src/utils.ts","../src/auto-detect.ts","../src/core.ts","../src/react.tsx","../src/webpack-plugin.ts","../src/vite-plugin.ts"],"sourcesContent":["import type { VersionInfo, VersionConfig } from './types';\n\n/**\n * Increment version number by patch, minor, or major\n */\nexport const incrementVersion = (version: string, type: 'patch' | 'minor' | 'major' = 'patch'): string => {\n  const cleanVersion = version.startsWith('v') ? version.slice(1) : version;\n  const parts = cleanVersion.split('.').map(Number);\n\n  if (parts.length !== 3) {\n    return version;\n  }\n\n  switch (type) {\n    case 'major':\n      parts[0] += 1;\n      parts[1] = 0;\n      parts[2] = 0;\n      break;\n    case 'minor':\n      parts[1] += 1;\n      parts[2] = 0;\n      break;\n    case 'patch':\n    default:\n      parts[2] += 1;\n      break;\n  }\n\n  const prefix = version.startsWith('v') ? 'v' : '';\n  return `${prefix}${parts.join('.')}`;\n};\n\n/**\n * Get environment variables from different sources\n */\nexport const getEnvVar = (key: string): string | undefined => {\n  // Try Vite environment variables first (import.meta.env)\n  try {\n    if (typeof import.meta !== 'undefined' && import.meta.env && key in import.meta.env) {\n      const value = (import.meta.env as any)[key];\n      if (value !== undefined && value !== null) {\n        return String(value);\n      }\n    }\n  } catch {\n    // Ignore errors if import.meta is not available\n  }\n\n  // Try other possible sources for backward compatibility\n  const possibleSources = [\n    () => (globalThis as any).import?.meta?.env?.[key],\n    () => (globalThis as any).__VITE_ENV__?.[key],\n    () => (globalThis as any).VITE_ENV?.[key],\n    () => process.env?.[key],\n    () => (window as any)?.__ENV__?.[key],\n  ];\n\n  for (let i = 0; i < possibleSources.length; i++) {\n    try {\n      const value = possibleSources[i]();\n      if (value) {\n        return value;\n      }\n    } catch {\n      // Ignore errors\n    }\n  }\n\n  return undefined;\n};\n\n/**\n * Parse build time from timestamp\n */\nexport const parseBuildTime = (timestamp?: string): string | undefined => {\n  if (!timestamp) return undefined;\n\n  const time = parseInt(timestamp, 10);\n  if (isNaN(time)) return undefined;\n\n  // Handle both seconds and milliseconds\n  const date = time < 10000000000 ? new Date(time * 1000) : new Date(time);\n  return date.toISOString();\n};\n\n/**\n * Get short commit hash\n */\nexport const getShortCommitHash = (hash?: string, length: number = 7): string | undefined => {\n  return hash ? hash.slice(0, length) : undefined;\n}; ","import { execSync } from 'child_process';\nimport { existsSync, readFileSync } from 'fs';\nimport { join } from 'path';\n\nexport interface GitInfo {\n  commitHash: string;\n  shortHash: string;\n  branch: string;\n  tag?: string;\n}\n\nexport interface PackageInfo {\n  version: string;\n  name: string;\n}\n\nexport type BuildSystem = 'vite' | 'webpack' | 'rollup' | 'parcel' | 'unknown';\n\n/**\n * Automatically detect Git information without requiring manual setup\n */\nexport const getGitInfo = (): GitInfo => {\n  try {\n    const commitHash = execSync('git rev-parse HEAD', { encoding: 'utf8' }).trim();\n    const shortHash = commitHash.slice(0, 7);\n    const branch = execSync('git rev-parse --abbrev-ref HEAD', { encoding: 'utf8' }).trim();\n\n    // Try to get the current tag\n    let tag: string | undefined;\n    try {\n      tag = execSync('git describe --tags --exact-match', { encoding: 'utf8' }).trim();\n    } catch {\n      // No exact tag match, that's okay\n    }\n\n    return { commitHash, shortHash, branch, tag };\n  } catch (error) {\n    // Git not available or not a git repository\n    return { commitHash: '', shortHash: '', branch: '' };\n  }\n};\n\n/**\n * Automatically read package.json from the current working directory\n */\nexport const getPackageInfo = (): PackageInfo => {\n  try {\n    const packagePath = join(process.cwd(), 'package.json');\n    if (!existsSync(packagePath)) {\n      throw new Error('package.json not found');\n    }\n\n    const packageJson = JSON.parse(readFileSync(packagePath, 'utf8'));\n    return {\n      version: packageJson.version || '0.0.0',\n      name: packageJson.name || 'unknown'\n    };\n  } catch (error) {\n    // Fallback to default values\n    return { version: '0.0.0', name: 'unknown' };\n  }\n};\n\n/**\n * Automatically detect build system and provide appropriate setup\n */\nexport const detectBuildSystem = (): BuildSystem => {\n  const configFiles = [\n    'vite.config.js',\n    'vite.config.ts',\n    'vite.config.mjs',\n    'webpack.config.js',\n    'webpack.config.ts',\n    'webpack.config.mjs',\n    'rollup.config.js',\n    'rollup.config.ts',\n    'rollup.config.mjs',\n    'parcel.config.js',\n    'parcel.config.ts',\n    'parcel.config.mjs'\n  ];\n\n  for (const file of configFiles) {\n    if (existsSync(join(process.cwd(), file))) {\n      if (file.startsWith('vite')) return 'vite';\n      if (file.startsWith('webpack')) return 'webpack';\n      if (file.startsWith('rollup')) return 'rollup';\n      if (file.startsWith('parcel')) return 'parcel';\n    }\n  }\n\n  return 'unknown';\n};\n\n/**\n * Get environment information\n */\nexport const getEnvironmentInfo = () => {\n  const nodeEnv = process.env.NODE_ENV || 'development';\n  const isProduction = nodeEnv === 'production';\n  const isDevelopment = nodeEnv === 'development';\n  const isTest = nodeEnv === 'test';\n\n  return {\n    nodeEnv,\n    isProduction,\n    isDevelopment,\n    isTest,\n    buildTime: Date.now()\n  };\n}; ","import type { VersionInfo, VersionConfig, Environment } from './types';\nimport { incrementVersion, getEnvVar, parseBuildTime, getShortCommitHash } from './utils';\nimport { getGitInfo, getPackageInfo, getEnvironmentInfo } from './auto-detect';\n\n/**\n * Get version information from environment variables and configuration\n * Now with automatic package.json and Git detection\n */\nexport const getVersionInfo = (config?: Partial<VersionConfig>): VersionInfo => {\n  // Auto-detect package.json and Git information\n  const packageInfo = getPackageInfo();\n  const gitInfo = getGitInfo();\n  const envInfo = getEnvironmentInfo();\n\n  // Read from Vite environment variables with improved fallbacks\n  const viteVersion = config?.productionVersion || getEnvVar('VITE_VERSION');\n  const viteAppEnv = config?.environment || getEnvVar('VITE_APP_ENV') || envInfo.nodeEnv;\n  const vitePackageVersion = config?.packageVersion || getEnvVar('VITE_PACKAGE_VERSION') || getEnvVar('npm_package_version') || packageInfo.version;\n  const viteCommitHash = config?.commitHash || getEnvVar('VITE_COMMIT_HASH') || getEnvVar('GITHUB_SHA') || gitInfo.commitHash;\n  const viteBuildTime = config?.buildTime || parseBuildTime(getEnvVar('VITE_BUILD_TIME')) || envInfo.buildTime.toString();\n\n  // Determine the environment\n  const environment = viteAppEnv || 'development';\n\n  // Determine the version with better defaults\n  let version = 'v0.0.0';\n  let productionVersion = viteVersion || `v${packageInfo.version}`;\n  let packageVersion = vitePackageVersion || packageInfo.version;\n\n  // Clean production version for comparison\n  const productionVersionClean = productionVersion.startsWith('v')\n    ? productionVersion.slice(1)\n    : productionVersion;\n\n  if (environment === 'production') {\n    version = productionVersion;\n  } else {\n    if (packageVersion !== productionVersionClean) {\n      // We're ahead of production, show next version\n      version = incrementVersion(productionVersion);\n    } else {\n      // We're at the same level as production, mirror production version\n      version = productionVersion;\n    }\n  }\n\n  return {\n    version,\n    buildTime: viteBuildTime,\n    commitHash: viteCommitHash,\n    environment,\n    packageVersion: vitePackageVersion,\n    branch: gitInfo.branch,\n    shortHash: gitInfo.shortHash,\n    tag: gitInfo.tag,\n  };\n};\n\n/**\n * Determine the appropriate version for each environment\n */\nconst getEnvironmentVersion = (\n  productionVersion: string,\n  packageVersion: string,\n  environment: Environment\n): string => {\n  // For production, always use the exact version from git tag\n  if (environment === 'production') {\n    return productionVersion;\n  }\n\n  // For other environments, determine if we're ahead of production\n  const productionVersionClean = productionVersion.startsWith('v')\n    ? productionVersion.slice(1)\n    : productionVersion;\n\n  // If package.json version is different from production, we're ahead\n  if (packageVersion !== productionVersionClean) {\n    // We're ahead of production, show next version\n    return incrementVersion(productionVersion);\n  } else {\n    // We're at the same level as production, mirror production version\n    return productionVersion;\n  }\n};\n\n/**\n * Format version for display with configurable options\n */\nexport const formatVersion = (\n  info: VersionInfo,\n  config?: Partial<VersionConfig>\n): string => {\n  const {\n    showEnvironment = true,\n    showCommitHash = true,\n    showBuildTime = false,\n    showBranch = false,\n    showTag = false,\n  } = config || {};\n\n  // Only add 'v' if not already present\n  let displayText = info.version.startsWith('v') ? info.version : `v${info.version}`;\n\n  // For production, only show the version number (clean and simple)\n  if (info.environment === 'production') {\n    return displayText;\n  }\n\n  // For non-production environments, show additional info based on config\n  if (showEnvironment && info.environment && info.environment !== 'production') {\n    displayText += ` (${info.environment})`;\n  }\n\n  if (showCommitHash && info.commitHash) {\n    displayText += ` #${getShortCommitHash(info.commitHash)}`;\n  }\n\n  if (showBranch && info.branch && info.branch !== 'main' && info.branch !== 'master') {\n    displayText += ` [${info.branch}]`;\n  }\n\n  if (showTag && info.tag) {\n    displayText += ` ${info.tag}`;\n  }\n\n  if (showBuildTime && info.buildTime) {\n    const date = new Date(info.buildTime);\n    displayText += ` @${date.toISOString().split('T')[0]}`;\n  }\n\n  return displayText;\n};\n\n/**\n * Create a custom version formatter\n */\nexport const createVersionFormatter = (config: Partial<VersionConfig>) => {\n  return (info: VersionInfo) => formatVersion(info, config);\n}; ","import React, { useMemo } from 'react';\nimport type { VersionInfo, VersionConfig } from './types';\nimport { getVersionInfo, formatVersion } from './core';\n\n/**\n * React hook to get version information\n */\nexport const useVersionInfo = (config?: Partial<VersionConfig>): VersionInfo => {\n  return useMemo(() => getVersionInfo(config), [\n    config?.productionVersion,\n    config?.packageVersion,\n    config?.environment,\n    config?.commitHash,\n    config?.buildTime,\n  ]);\n};\n\n/**\n * React hook to get formatted version string\n */\nexport const useVersionDisplay = (config?: Partial<VersionConfig>): string => {\n  const versionInfo = useVersionInfo(config);\n\n  return useMemo(() => formatVersion(versionInfo, config), [\n    versionInfo,\n    config?.showEnvironment,\n    config?.showCommitHash,\n    config?.showBuildTime,\n  ]);\n};\n\n/**\n * Simple React component to display version information (matches version-fix.tsx)\n */\nexport function VersionDisplay({ className = '' }: { className?: string }) {\n  const versionInfo = getVersionInfo();\n\n  return <span className={className}>{formatVersion(versionInfo)}</span>;\n}\n\n/**\n * Advanced React component to display version information with full configuration\n */\nexport interface VersionDisplayProps extends Partial<VersionConfig> {\n  className?: string;\n  children?: (version: string, info: VersionInfo) => React.ReactNode;\n}\n\nexport const VersionDisplayAdvanced: React.FC<VersionDisplayProps> = ({\n  className = '',\n  children,\n  ...config\n}) => {\n  const versionInfo = useVersionInfo(config);\n  const versionDisplay = useVersionDisplay(config);\n\n  if (children) {\n    return <>{children(versionDisplay, versionInfo)}</>;\n  }\n\n  return (\n    <span className={className} data-testid=\"version-display\">\n      {versionDisplay}\n    </span>\n  );\n}; ","import { getGitInfo, getPackageInfo, getEnvironmentInfo } from './auto-detect';\n\nexport interface VersionInfoWebpackPluginOptions {\n  /**\n   * Override the package version\n   */\n  packageVersion?: string;\n\n  /**\n   * Override the production version\n   */\n  productionVersion?: string;\n\n  /**\n   * Override the environment\n   */\n  environment?: string;\n\n  /**\n   * Override the commit hash\n   */\n  commitHash?: string;\n\n  /**\n   * Override the build time\n   */\n  buildTime?: string;\n\n  /**\n   * Whether to include Git information\n   */\n  includeGitInfo?: boolean;\n\n  /**\n   * Whether to include build time\n   */\n  includeBuildTime?: boolean;\n}\n\n/**\n * Webpack plugin that automatically sets up version information environment variables\n * Note: Webpack is an optional dependency. If webpack is not available, this plugin will throw an error.\n */\nexport class VersionInfoWebpackPlugin {\n  private options: VersionInfoWebpackPluginOptions;\n\n  constructor(options: VersionInfoWebpackPluginOptions = {}) {\n    this.options = options;\n  }\n\n  apply(compiler: any) {\n    // Check if webpack is available\n    let webpack: any;\n    try {\n      webpack = require('webpack');\n    } catch (error) {\n      throw new Error('Webpack is required for VersionInfoWebpackPlugin. Please install webpack as a dependency.');\n    }\n\n    // Auto-detect information\n    const packageInfo = getPackageInfo();\n    const gitInfo = getGitInfo();\n    const envInfo = getEnvironmentInfo();\n\n    // Use provided options or auto-detected values\n    const packageVersion = this.options.packageVersion || packageInfo.version;\n    const productionVersion = this.options.productionVersion || `v${packageVersion}`;\n    const environment = this.options.environment || envInfo.nodeEnv;\n    const commitHash = this.options.commitHash || (this.options.includeGitInfo !== false ? gitInfo.commitHash : '');\n    const buildTime = this.options.buildTime || (this.options.includeBuildTime !== false ? envInfo.buildTime.toString() : '');\n\n    // Determine the version based on environment\n    let version = productionVersion;\n    if (environment !== 'production') {\n      // For non-production, increment the version\n      const { incrementVersion } = require('./utils');\n      version = incrementVersion(productionVersion);\n    }\n\n    // Define environment variables\n    const definePlugin = new webpack.DefinePlugin({\n      'process.env.VITE_VERSION': JSON.stringify(version),\n      'process.env.VITE_PACKAGE_VERSION': JSON.stringify(packageVersion),\n      'process.env.VITE_APP_ENV': JSON.stringify(environment),\n      ...(commitHash && {\n        'process.env.VITE_COMMIT_HASH': JSON.stringify(commitHash),\n        'process.env.VITE_SHORT_HASH': JSON.stringify(gitInfo.shortHash),\n      }),\n      ...(buildTime && {\n        'process.env.VITE_BUILD_TIME': JSON.stringify(buildTime),\n      }),\n      ...(gitInfo.branch && {\n        'process.env.VITE_BRANCH': JSON.stringify(gitInfo.branch),\n      }),\n      ...(gitInfo.tag && {\n        'process.env.VITE_TAG': JSON.stringify(gitInfo.tag),\n      }),\n    });\n\n    definePlugin.apply(compiler);\n  }\n} ","import type { Plugin } from 'vite';\nimport { getGitInfo, getPackageInfo, getEnvironmentInfo } from './auto-detect';\nimport { incrementVersion } from './utils';\n\nexport interface VersionInfoPluginOptions {\n  /**\n   * Override the package version\n   */\n  packageVersion?: string;\n\n  /**\n   * Override the production version\n   */\n  productionVersion?: string;\n\n  /**\n   * Override the environment\n   */\n  environment?: string;\n\n  /**\n   * Override the commit hash\n   */\n  commitHash?: string;\n\n  /**\n   * Override the build time\n   */\n  buildTime?: string;\n\n  /**\n   * Whether to include Git information\n   */\n  includeGitInfo?: boolean;\n\n  /**\n   * Whether to include build time\n   */\n  includeBuildTime?: boolean;\n}\n\n/**\n * Vite plugin that automatically sets up version information environment variables\n */\nexport function versionInfoPlugin(options: VersionInfoPluginOptions = {}): Plugin {\n  return {\n    name: 'version-info',\n    config(config, { command }) {\n      // Auto-detect information\n      const packageInfo = getPackageInfo();\n      const gitInfo = getGitInfo();\n      const envInfo = getEnvironmentInfo();\n\n      // Use provided options or auto-detected values\n      const packageVersion = options.packageVersion || packageInfo.version;\n      const productionVersion = options.productionVersion || `v${packageVersion}`;\n      const environment = options.environment || envInfo.nodeEnv;\n      const commitHash = options.commitHash || (options.includeGitInfo !== false ? gitInfo.commitHash : '');\n      const buildTime = options.buildTime || (options.includeBuildTime !== false ? envInfo.buildTime.toString() : '');\n\n      // Determine the version based on environment\n      let version = productionVersion;\n      if (environment !== 'production') {\n        // For non-production, increment the version\n        version = incrementVersion(productionVersion);\n      }\n\n      const define: Record<string, string> = {\n        'import.meta.env.VITE_VERSION': JSON.stringify(version),\n        'import.meta.env.VITE_PACKAGE_VERSION': JSON.stringify(packageVersion),\n        'import.meta.env.VITE_APP_ENV': JSON.stringify(environment),\n      };\n\n      if (commitHash) {\n        define['import.meta.env.VITE_COMMIT_HASH'] = JSON.stringify(commitHash);\n        define['import.meta.env.VITE_SHORT_HASH'] = JSON.stringify(gitInfo.shortHash);\n      }\n\n      if (buildTime) {\n        define['import.meta.env.VITE_BUILD_TIME'] = JSON.stringify(buildTime);\n      }\n\n      if (gitInfo.branch) {\n        define['import.meta.env.VITE_BRANCH'] = JSON.stringify(gitInfo.branch);\n      }\n\n      if (gitInfo.tag) {\n        define['import.meta.env.VITE_TAG'] = JSON.stringify(gitInfo.tag);\n      }\n\n      return {\n        define: {\n          ...config.define,\n          ...define,\n        }\n      };\n    }\n  };\n} "],"names":["incrementVersion","version","type","parts","startsWith","slice","split","map","Number","length","join","getEnvVar","key","document","require","pathToFileURL","__filename","href","_documentCurrentScript","tagName","toUpperCase","src","URL","baseURI","possibleSources","globalThis","import","meta","env","__VITE_ENV__","VITE_ENV","process","window","__ENV__","i","value","parseBuildTime","timestamp","time","parseInt","isNaN","Date","toISOString","getShortCommitHash","hash","undefined","getGitInfo","commitHash","execSync","encoding","trim","shortHash","branch","tag","error","getPackageInfo","packagePath","cwd","existsSync","Error","packageJson","JSON","parse","readFileSync","name","getEnvironmentInfo","nodeEnv","NODE_ENV","isProduction","isDevelopment","isTest","buildTime","now","getVersionInfo","config","packageInfo","gitInfo","envInfo","viteVersion","productionVersion","viteAppEnv","environment","vitePackageVersion","packageVersion","viteCommitHash","viteBuildTime","toString","productionVersionClean","formatVersion","info","showEnvironment","showCommitHash","showBuildTime","showBranch","showTag","displayText","useVersionInfo","useMemo","useVersionDisplay","versionInfo","className","_jsx","jsx","children","versionDisplay","_Fragment","Fragment","constructor","options","this","apply","compiler","webpack","includeGitInfo","includeBuildTime","DefinePlugin","stringify","configFiles","file","command","define"],"mappings":"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"}