import{jsx as e,Fragment as t}from"react/jsx-runtime";import{useMemo as n}from"react";const i=(e,t="patch")=>{const n=(e.startsWith("v")?e.slice(1):e).split(".").map(Number);if(3!==n.length)return e;switch(t){case"major":n[0]+=1,n[1]=0,n[2]=0;break;case"minor":n[1]+=1,n[2]=0;break;default:n[2]+=1}return`${e.startsWith("v")?"v":""}${n.join(".")}`},r=e=>{try{if(void 0!==import.meta&&import.meta.env&&e in import.meta.env){const t=import.meta.env[e];if(null!=t)return String(t)}}catch{}const t=[()=>globalThis.import?.meta?.env?.[e],()=>globalThis.__VITE_ENV__?.[e],()=>globalThis.VITE_ENV?.[e],()=>process.env?.[e],()=>window?.__ENV__?.[e]];for(let e=0;e<t.length;e++)try{const n=t[e]();if(n)return n}catch{}},o=e=>{if(!e)return;const t=parseInt(e,10);if(isNaN(t))return;return(t<1e10?new Date(1e3*t):new Date(t)).toISOString()},s=(e,t=7)=>e?e.slice(0,t):void 0,a=e=>{const t=e?.productionVersion||r("VITE_VERSION"),n=e?.environment||r("VITE_APP_ENV")||r("NODE_ENV")||"development",s=e?.packageVersion||r("VITE_PACKAGE_VERSION")||r("npm_package_version")||"0.0.0",a=e?.commitHash||r("VITE_COMMIT_HASH")||r("GITHUB_SHA"),m=e?.buildTime||o(r("VITE_BUILD_TIME")),c=n||"development";let l="0.0.0",u=t||"v0.0.0",v=s||"0.0.0";const h=u.startsWith("v")?u.slice(1):u;return l="production"===c?u:v!==h?i(u):u,{version:l,buildTime:m,commitHash:a,environment:c,packageVersion:s}},m=(e,t)=>{const{showEnvironment:n=!0,showCommitHash:i=!0,showBuildTime:r=!1}=t||{};let o=e.version.startsWith("v")?e.version:`v${e.version}`;if("production"===e.environment)return o;if(n&&e.environment&&"production"!==e.environment&&(o+=` (${e.environment})`),i&&e.commitHash&&(o+=` #${s(e.commitHash)}`),r&&e.buildTime){o+=` @${new Date(e.buildTime).toISOString().split("T")[0]}`}return o},c=e=>t=>m(t,e),l=e=>n(()=>a(e),[e?.productionVersion,e?.packageVersion,e?.environment,e?.commitHash,e?.buildTime]),u=e=>{const t=l(e);return n(()=>m(t,e),[t,e?.showEnvironment,e?.showCommitHash,e?.showBuildTime])};function v({className:t=""}){const n=a();return e("span",{className:t,children:m(n)})}const h=({className:n="",children:i,...r})=>{const o=l(r),s=u(r);return i?e(t,{children:i(s,o)}):e("span",{className:n,"data-testid":"version-display",children:s})};export{v as VersionDisplay,h as VersionDisplayAdvanced,c as createVersionFormatter,a as default,m as formatVersion,r as getEnvVar,s as getShortCommitHash,a as getVersionInfo,i as incrementVersion,o as parseBuildTime,u as useVersionDisplay,l as useVersionInfo};
//# sourceMappingURL=index.esm.js.map
